<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.thymeleaf.org ">
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <style type="text/css">
        td{
            text-align: center;
        }
    </style>
    <script src="/static/js/jquery-2.2.3.min.js"></script>
</head>
<body>
<table th:include="head"></table><br/><br/>
    <div style="text-align: center;">
        <a href="/item/showArticleSave?isAddBanner=1">增加轮播图</a>
    </div>

    <table cellpadding="0" cellspacing="0" border="1" width="500px" align="center">
        <caption align="top">轮播图管理系统</caption>
        <tr>
            <th>logo</th>
            <th>名称</th>
            <th>简介</th>
            <th>编辑</th>
            <th>删除</th>
        </tr>
        <tbody id="containner">
                <tr th:each="itemBean:${bannerList}">
                    <td>
                        <img style="width: 100px; height: 100px;" th:src="${itemBean.imgurl}">
                    </td>
                    <td th:text="${itemBean.title}"></td>
                    <td th:text="${itemBean.content}"></td>
                    <td><a th:href="@{/item/showArticleSave?isAddBanner=1&(id=${itemBean.id})}">编辑</a></td>
                    <td><button th:onclick="deleteById([[${itemBean.id}]], [[${itemBean.title}]])">删除</button></td>
                </tr>
        </tbody>
    </table>
</body>

<script type="text/javascript">

//    function findByPid(pid){
//        $.get(
//                "/item/listById?id="+pid,
//                function(data){
////                    var articleList = eval("("+data+")");
//
//                    var tbodyElement = $("#containner");
//                    tbodyElement.html("");
//
//                    for (var i = 0; i < data.length; i++) {
//                        var article = data[i];
//                        var trElement = "<tr>"
//                        trElement+="<td><img style='width: 150px; height: 150px;' src='"+article.imgurl+"'/></td>";
//                        trElement+="<td>"+article.title+"</td>";
//                        trElement+="<td>"+article.content+"</td>";
//                        trElement+="<td><a href='/item/showArticleSave?id="+article.id+"'>编辑</a></td>";
//                        var deleteBtn = "deleteById("+article.id+", '"+article.title+"')";
//                        trElement+= "<td><button onclick=\""+deleteBtn+"\">删除</button></td>";
//                        tbodyElement.append(trElement);
//                    }
//                }
//        );
//    }
//
//    function changeTitle(){
//        findByPid(document.getElementById("titleSelect").value);
//    }

    function deleteById(id, title){
        var isDelete = window.confirm("确定删除"+title+"吗");
        if (isDelete){
            window.location.href = "/item/deleteById?id="+id;
        }
    }

//    findByPid(document.getElementById("titleSelect").value);
</script>
</html>
